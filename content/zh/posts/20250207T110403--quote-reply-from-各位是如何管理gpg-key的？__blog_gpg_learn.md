---
title:      "Quote reply from 各位是如何管理gpg key的？"
date:       2025-02-07T11:04:03+08:00
tags:       ["blog", "gpg", "learn"]
identifier: "20250207T110403"
---

Quote the reply from [LdBeth](https://emacs-china.org/u/LdBeth) in the question [各位是如何管理gpg key的？](https://emacs-china.org/t/gpg-key/23250/10)

> 加密文件应该用对称加密，用一个可以记住的密码，不放心就用密码管理器，不应该用非对称密钥，不然密钥存在本地的话也安全不到哪里去。GPG key 只用来给签名，加密邮件通讯用

对称加密的速度要远快于非对称加密，非对称加密一般是用于解决达成密码共识的问题。

TLS/SSL（HTTPS）融合了两种加密方式：对称 + 非对称混合加密

- 握手阶段：使用 RSA/ECC 交换 AES 密钥（慢，但安全）。
- 数据传输阶段：用 AES 进行加密（快，适合大流量）。


> 只要不删除私钥，过期不影响解密，而且只要私钥还在即使过期了也可以随时延期，所以过期日最好不超过两年，本质上有效期就是一个主钥加在公钥上的签名，通过更新频率公开证明持有者没把私钥弄丢掉，而私钥本身是不带有效日期的，

之前一直以为密钥过期就得换，原来是担心丢失密钥的问题，通过延期来证明密钥还在自己手上。

> 但是 yubikey 这样的硬件是不能导出密钥备份的，一旦丢失，被重置，生成新的密钥，加密信息就相当于永久失去了，所以不应该用来加密长期保存的文件。

所以一旦使用yubikey还是得小心点，最好提前准备好两个或以上的yubikey，确保导入的密钥已经做好了备份。

> 如果想要以后参加线下活动时别人给你 key sign，用证件上的真名，不要用冻鳗人物名字。

想起之前看到的一个视频，在国外找工作的时候，好多人提供了qq邮箱，全是数字，而且默认还是qq的昵称。老外表示很不理解。

> master key 要选 ECC 而不是 RSA，这样用 paperkey 导出私钥来备份能短很多，手抄下来就行，加个戳防止私自拆开，放在稳妥能随时检查的地方，

GPG好像默认是RSA

> 撤销证书可以手写备份，不过对称加密后放在网盘里也可以。编辑操作用的带主私钥的 keyring 放在全盘加密的 U 盘上，讲究的话操作就要用 liveCD 断网完成，完成后只导出子密钥和公钥，但是主密钥千万不能放在日常能接触到的地方。

好像我自己还没备份过GPG key。用一个主密钥外加子密钥的方式还没试过，后面再了解。

> 有 yubikey 的话，主密钥不要放上面，先配置好生成 key 的格式和 PIN，然后直接在硬件上生成 subkey。这样就算别人拿到了 master key，也解密不了通讯内容，最多只能修改公钥，这时候用之前保存的撤销证书就行了。yubikey 丢了，有 master key 就能撤销 subkey。两个都丢了人还没事说明保存策略有问题。

> yubikey 也可以保存 authentication key，用来 ssh，就不用在本地保存私钥，但是注意算法只能选 ssh -Q key 里面对应的，有的格式可以在 yubikey 里生成但是 ssh 里用不了。

虽然公司配了yubikey，但用的还是比较少，而且只有一个。个人的东西还是不放在上面了。后续如果有需要再了解。

> 正常使用的话 5 年就可以换一次主密钥了，到时候私钥还没丢，就可以把新老 key 互相签一遍，把老的撤销，一起上传就行。
